% ---------- Math Symbols ----------
\newcommand{\bb}[1]{\mathbb{#1}}

%\newcommand{\T}{\theta}

\newcommand{\der}[2]{\frac{d #1}{d #2}}

% For T-diagrams
\tikzstyle{tblock} = [matrix of nodes,ampersand replacement=\&,nodes={
    outer sep=0pt,text width=2em,inner ysep=1em,text centered
}]

% \tblock {input} {output} {machine}
\newcommand{\tblocktext}[3]{
    {#1} \& $\to$   \& {#2} \\
         \&  {#3}   \&      \\
}

\newcommand{\tblockoutline}[1]{
    \draw (#1-1-1.south west) |- (#1-1-3.north east) |- (#1-1-3.south west) |- (#1-2-2.south west) |- (#1-1-1.south west);
}

\tikzstyle{wblock} = [outer sep=0pt,text width=2em,inner ysep=0.5em,text centered,font=\footnotesize]

\newcommand{\wblockoutline}[1]{
    \draw (#1.south) -- (#1.north west) -- (#1.north east) -- (#1.south);
}

\def\compiler at (#1,#2,#3,#4,#5){
 \draw (#1, #2) -- (#1+3, #2) -- (#1+3, #2-1) -- (#1+2, #2-1) -- (#1+2, #2-2)
 -- (#1+1, #2-2) -- (#1+1, #2-1) -- (#1, #2-1) -- (#1, #2)
 (#1+0.5, #2-0.5) node {\small #3}
 (#1+2.5, #2-0.5) node {\small #4}
 (#1+1.5, #2-1.5) node {\small #5};
}

\def\interpreter at (#1,#2,#3,#4){
 \draw (#1, #2) -- (#1+1, #2) -- (#1+1, #2-2) -- (#1, #2-2) -- (#1, #2)
 (#1+0.5, #2-0.5) node {\small #3}
 (#1+0.5, #2-1.5) node {\small #4};
}

\def\machine at (#1,#2,#3){
 \draw (#1, #2) -- (#1+1, #2) -- (#1+0.5, #2-0.86) -- (#1, #2)
 (#1+0.5, #2-0.2) node {\tiny #3};
}
\def\unspecifiedprogram at (#1,#2,#3){
    \draw (#1, #2+1) -- (#1, #2) --  (#1+1, #2) -- (#1+1, #2+1);
    \draw (#1, #2+1) .. controls (#1-1, #2+2) and (#1+2, #2+2) .. (#1+1, #2+1)
    (#1+0.5, #2+0.5) node {\small #3};
}

% ---- Round tables ----
\newsavebox{\tablebox}
\NewEnviron{rndtable}[1]{%
  \addtolength{\extrarowheight}{1ex}%
  %\rowcolors{2}{tablecolor!20}{tablecolor!40}%

  \savebox{\tablebox}{%
    \begin{tabular}{#1}%
      \BODY%
    \end{tabular}}%
  \begin{tikzpicture}
    \begin{scope}
      \clip[rounded corners=1ex] (0,-\dp\tablebox) -- (\wd\tablebox,-\dp\tablebox) -- (\wd\tablebox,\ht\tablebox) -- (0,\ht\tablebox) -- cycle;
      \node at (0,-\dp\tablebox) [anchor=south west,inner sep=0pt]{\usebox{\tablebox}};
    \end{scope}
    \draw[rounded corners=1ex] (0,-\dp\tablebox) -- (\wd\tablebox,-\dp\tablebox) -- (\wd\tablebox,\ht\tablebox) -- (0,\ht\tablebox) -- cycle;
  \end{tikzpicture}
}

% ---- F# -----
\definecolor{bluekeywords}{rgb}{0.13,0.13,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{turqusnumbers}{rgb}{0.17,0.57,0.69}
\definecolor{redstrings}{rgb}{0.5,0,0}
\lstdefinelanguage{FSharp}
		{morekeywords={let, new, match, with, rec, open, module, namespace, type, of, member, and, for, in, do, begin, end, fun, function, try, mutable, if, then, else},
     keywordstyle=\color{bluekeywords},
     sensitive=false,
     morecomment=[l][\color{greencomments}]{///},
     morecomment=[l][\color{greencomments}]{//},
     morecomment=[s][\color{greencomments}]{{(*}{*)}},
     morestring=[b]",
     stringstyle=\color{redstrings}
     }